import{u as p,r as d,j as e}from"./index-BzgxH7_M.js";import{b as j,c as u}from"./index-BIAQVY8k.js";import{a as g,d as y}from"./AuthService-DGn1PQ4G.js";import{c as b,a as N}from"./dateTimeFormater-D7Rvvgct.js";import"./iconBase-2GWgdyYW.js";import"./index-DQlLYHdx.js";const R=()=>{const o=p(),[t,l]=d.useState([]),h=async()=>{const s=await g("CUSTOMER");l(s)};d.useEffect(()=>{h()},[]),console.log(t);const m=async s=>{await y(s),h()};return e.jsx("div",{className:"bg-white admin-dashboard h-100 ",children:e.jsxs("table",{children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"60px",aspectRatio:"1/1"},className:"border-0"}),e.jsx("th",{scope:"col",className:"border-0 ps-3",children:"Member's Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"TOTAL INVESTMENT"}),e.jsx("th",{scope:"col",children:" TOTAL AMOUNT "}),e.jsx("th",{scope:"col",children:" "}),e.jsx("th",{className:"border-0"})]})}),e.jsx("tbody",{children:t&&(t==null?void 0:t.map((s,r)=>{var a,i,n;return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"60px",aspectRatio:"1/1"}}),e.jsxs("td",{className:" ps-5",children:[(a=s==null?void 0:s.personal)==null?void 0:a.firstName," ",(i=s==null?void 0:s.personal)==null?void 0:i.lastName]}),e.jsx("td",{children:(n=s==null?void 0:s.account)==null?void 0:n.email}),e.jsx(f,{userId:s._id}),e.jsxs("td",{className:"d-flex gap-3 ",children:[e.jsx("button",{onClick:()=>o("personal-details",{state:s==null?void 0:s._id}),className:"btn text-primary bg-very-light-gray rounded-circle",children:e.jsx(j,{size:20})}),e.jsx("button",{onClick:()=>m(s==null?void 0:s._id),className:"btn bg-gray bg-very-light-gray rounded-circle text-gray",children:e.jsx(u,{size:20})})]}),e.jsx("td",{style:{width:"60px",aspectRatio:"1/1"}})]},r)}))})]})})},f=({userId:o})=>{const[t,l]=d.useState(0),[h,m]=d.useState(0);return d.useEffect(()=>{(async()=>{try{const r=await N(o);let a=0,i=0;r==null||r.forEach(n=>{var x;(x=n==null?void 0:n.investors)==null||x.forEach(c=>{(c==null?void 0:c.investerId)===o&&(console.log(c),i+=parseInt(c==null?void 0:c.amount)||0,a+=1)})}),l(a),m(i)}catch(r){console.error("Error fetching data:",r)}})()},[o]),e.jsxs(e.Fragment,{children:[e.jsxs("td",{children:[t," Investments"]}),e.jsx("td",{children:b(h)})]})};export{R as default};
